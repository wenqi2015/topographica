<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ImaGen spatial coordinate systems &mdash; Topographica</title>
    
    <link rel="stylesheet" href="../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.9.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/custom.js"></script>
    <link rel="shortcut icon" href="../_static/topo-favicon.ico"/>
    <link rel="top" title="Topographica" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>

<li><a href="../index.html">Home</a></li>
<li><a href="../Downloads/index.html">Downloads</a></li>
<li><a href="../Tutorials/index.html">Tutorials</a></li>
<li><a href="index.html">User Manual</a></li>







      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="imagen-spatial-coordinate-systems">
<h1>ImaGen spatial coordinate systems<a class="headerlink" href="#imagen-spatial-coordinate-systems" title="Permalink to this headline">¶</a></h1>
<p>ImaGen supports resolution-independent specification and generation
of input patterns. To achieve this, ImaGen provides multiple spatial
coordinate systems, called <em>Sheet</em> and <em>matrix</em> coordinates.</p>
<div class="section" id="sheet-coordinates">
<h2>Sheet coordinates<a class="headerlink" href="#sheet-coordinates" title="Permalink to this headline">¶</a></h2>
<p>User-accessible quantities are always expressed in Sheet
coordinates, which are resolution independent. An ImaGen
<a class="reference external" href="../Reference_Manual/imagen.sheetcoords.SheetCoordinateSystem-class.html">SheetCoordinateSystem</a> is a rectangularly bounded region of a
continuous two-dimensional plane. The default SheetCoordinateSystem
has a square area of 1.0 centered at (0.0,0.0):</p>
<div class="figure align-center">
<img alt="" src="../_images/sheet_coords.png" />
</div>
<p>Locations in a SheetCoordinateSystem are specified using
floating-point Sheet coordinates (x,y) contained within the
SheetCoordinateSystem&#8217;s <a class="reference external" href="../Reference_Manual/imagen.boundingregion.BoundingBox-class.html">BoundingBox</a>. The thick black line in the
figure above shows the BoundingBox of the default
SheetCoordinateSystem, which extends from (-0.5,-0.5) to (0.5,0.5)
in Sheet coordinates. Any coordinate within the BoundingBox is a
valid Sheet coordinate.</p>
</div>
<div class="section" id="image-coordinates">
<h2>Image coordinates<a class="headerlink" href="#image-coordinates" title="Permalink to this headline">¶</a></h2>
<p>Although users primarily manipulate the abstract, continuous
SheetCoordinateSystem, the actual output from a PatternGenerator is
a finite matrix that regularly samples this continuous space. Each
SheetCoordinateSystem has a parameter called its <em>density</em>, which
specifies how many units (matrix elements) in the matrix correspond
to a unit length in Sheet coordinates. For instance, the default
SheetCoordinateSystem above with a density of 5 corresponds to the
matrix on the left below:</p>
<p><img alt="image0" src="../_images/matrix_coords.png" /> <img alt="image1" src="../_images/sheet_coords_-0.2_0.4.png" /></p>
<p>Here, the 1.0x1.0 area of Sheet coordinates is represented by a 5x5
matrix, whose BoundingBox (represented by a thick black outline)
corresponds exactly to the BoundingBox of the Sheet to which it
belongs. Each floating-point location (x,y) in Sheet coordinates
corresponds uniquely to a floating-point location (r,c) in
floating-point matrix coordinates, and vice versa. Individual units
or elements in this array are accessed using integer <em>matrix index</em>
coordinates, which can be calculated from the matrix coordinate
<tt class="docutils literal"><span class="pre">(r,c)</span></tt> as (<tt class="docutils literal"><span class="pre">floor(int(r))</span></tt>,<tt class="docutils literal"><span class="pre">floor(int(c))</span></tt>).</p>
<p>For the example shown, the center of the unit with matrix index
(0,1) is at location (0.5,1.5) in matrix coordinates and (-0.2,0.4)
in Sheet coordinates. Notice that matrix and matrix index
coordinates start at (0.0,0.0) in the upper left and increase down
and to the right (as is the accepted convention for matrices), while
Sheet coordinates start at the center and increase up and to the
right (as is the accepted convention for Cartesian coordinates).</p>
<p>The reason for having multiple sets of coordinates is that the same
SheetCoordinateSystem can at another time yield a different matrix
specified by a different density. For instance, if this
SheetCoordinateSystem had a density of 10 instead, the corresponding
matrix would be:</p>
<p><img alt="image2" src="../_images/matrix_coords_hidensity.png" /> <img alt="image3" src="../_images/sheet_coords_-0.2_0.4.png" /></p>
<p>Using this higher density, Sheet coordinate (-0.2,0.4) now
corresponds to the matrix coordinate (1.0,3.0). As long as the user
interface specifies all units in Sheet coordinates and converts
these to matrix coordinates appropriately, the user can use
different densities at different times without changing any other
parameters.</p>
<div class="section" id="technical-details">
<h3>Technical details<a class="headerlink" href="#technical-details" title="Permalink to this headline">¶</a></h3>
<p>In some cases, the details of representing a SheetCoordinateSystem
with a matrix of a certain density can be more complex than
described above, because it is possible to specify a bounds and
density combination that cannot be realized exactly. For this
reason, the quantities set by the user are called
<tt class="docutils literal"><span class="pre">nominal_density</span></tt> and <tt class="docutils literal"><span class="pre">nominal_bounds</span></tt>, and the true bounds and
density are calculated from these.</p>
<p>For instance, consider requesting that a SheetCoordinateSystem have
bounds of <tt class="docutils literal"><span class="pre">BoundingBox(radius=0.3)</span></tt>, and density of <tt class="docutils literal"><span class="pre">7</span></tt>. Such an
area (a 0.6 x 0.6 square) cannot be tiled exactly by 7 units per 1.0
length. When such a SheetCoordinateSystem is created, the density
will be adjusted so that the requested sheet bounds (and thus the
overall area) is respected. In this example, the
SheetCoordinateSystem would have an actual density of 6.67 (the
closest value to tile the plane exactly; see
<a class="reference external" href="../Reference_Manual/imagen.sheetcoords.SheetCoordinateSystem-class.html">SheetCoordinateSystem</a>). This approach was chosen so that whenever
the density is changed, the matrix remains the best possible
approximation of the requested area.</p>
<p>In summary, the bounds specified for a SheetCoordinateSystem are
respected, but the density may be adjusted so that the plane is
tiled exactly.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/topo-banner7.png" alt="Logo"/>
            </a></p>
<ul class="global-toc">

<li><a href="../index.html">Home</a></li>
<li><a href="../News/index.html">News</a></li>
<li><a href="../Downloads/index.html">Downloads</a></li>
<li><a href="../Tutorials/index.html">Tutorials</a></li>
<li><a href="index.html">User Manual</a></li>
<li><a href="../Reference_Manual/index.html">Reference Manual</a></li>
<li><a href="../Developer_Manual/index.html">Developer Manual</a></li>
<li><a href="http://github.com/ioam/topographica">Github Source Code</a></li>
<li><a href="../Forums/index.html">Forums</a></li>
<li><a href="../Team_Members/index.html">Team Members</a></li>
<li><a href="../Future_Work/index.html">Future Work</a></li>
<li><a href="../FAQ/index.html">FAQ</a></li>
<li><a href="../Links/index.html">Links</a></li>
<li><a href="../Home/pubs.html">Publications</a></li>
<li><a href="../site_map.html">Site Map</a></li>
</ul>
<h3><a href="../index.html">Table Of Contents</a></h3>

<ul>
<li><a class="reference internal" href="#">ImaGen spatial coordinate systems</a><ul>
<li><a class="reference internal" href="#sheet-coordinates">Sheet coordinates</a></li>
<li><a class="reference internal" href="#image-coordinates">Image coordinates</a><ul>
<li><a class="reference internal" href="#technical-details">Technical details</a></li>
</ul>
</li>
</ul>
</li>
</ul>


<h3>This Page</h3>
<ul class="this-page-menu">
	<li><a	href="https://github.com/ioam/topographica/edit/master/doc/User_Manual/coords.rst" rel="nofollow">Edit on GitHub</a></li>
    <li><a	href="http://doozy.inf.ed.ac.uk:8010/builders/topographica_docs" rel="nofollow">Rebuild docs</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>

<li><a href="../index.html">Home</a></li>
<li><a href="../Downloads/index.html">Downloads</a></li>
<li><a href="../Tutorials/index.html">Tutorials</a></li>
<li><a href="index.html">User Manual</a></li>







      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, IOAM.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>