<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>topo.tkgui.plotgrouppanel &mdash; Topographica</title>
    
    <link rel="stylesheet" href="../../../_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '0.9.8',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../../_static/custom.js"></script>
    <link rel="shortcut icon" href="../../../_static/topo-favicon.ico"/>
    <link rel="top" title="Topographica" href="../../../index.html" />
    <link rel="up" title="topo.tkgui" href="../tkgui.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>

<li><a href="../../../index.html">Home</a></li>
<li><a href="../../../Downloads/index.html">Downloads</a></li>
<li><a href="../../../Tutorials/index.html">Tutorials</a></li>
<li><a href="../../../User_Manual/index.html">User Manual</a></li>



<li><ul class="parents">



          <li><a href="../../index.html" >Module code</a> &raquo;</li>
          <li><a href="../tkgui.html" accesskey="U">topo.tkgui</a> &raquo;</li>

</ul></li>


      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <h1>Source code for topo.tkgui.plotgrouppanel</h1><div class="highlight"><pre>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Classes providing GUI windows for PlotGroups, allowing sets of related plots</span>
<span class="sd">to be displayed.</span>
<span class="sd">&quot;&quot;&quot;</span>


<span class="kn">import</span> <span class="nn">copy</span>

<span class="kn">import</span> <span class="nn">ImageTk</span>

<span class="kn">import</span> <span class="nn">Tkinter</span>
<span class="kn">from</span> <span class="nn">Tkinter</span> <span class="kn">import</span>  <span class="n">Frame</span><span class="p">,</span> <span class="n">TOP</span><span class="p">,</span> <span class="n">YES</span><span class="p">,</span> <span class="n">BOTH</span><span class="p">,</span> <span class="n">X</span><span class="p">,</span> <span class="n">LEFT</span><span class="p">,</span> \
     <span class="n">RIGHT</span><span class="p">,</span> <span class="n">DISABLED</span><span class="p">,</span> <span class="n">NORMAL</span><span class="p">,</span> <span class="n">Canvas</span><span class="p">,</span> <span class="n">Label</span><span class="p">,</span> <span class="n">NSEW</span><span class="p">,</span> \
     <span class="n">NO</span><span class="p">,</span> <span class="n">NONE</span><span class="p">,</span><span class="n">TclError</span>

<span class="kn">import</span> <span class="nn">param</span>
<span class="c"># CEBALERT: here and elsewhere, change tk to paramtk</span>
<span class="kn">import</span> <span class="nn">paramtk</span> <span class="kn">as</span> <span class="nn">tk</span>

<span class="kn">from</span> <span class="nn">topo.base.sheet</span> <span class="kn">import</span> <span class="n">Sheet</span>
<span class="kn">from</span> <span class="nn">topo.base.cf</span> <span class="kn">import</span> <span class="n">CFSheet</span>

<span class="kn">from</span> <span class="nn">topo.command.pylabplot</span> <span class="kn">import</span> <span class="n">matrixplot</span>

<span class="kn">from</span> <span class="nn">topo.base.generatorsheet</span> <span class="kn">import</span> <span class="n">GeneratorSheet</span>

<span class="kn">import</span> <span class="nn">topo</span>

<div class="viewcode-block" id="with_busy_cursor"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.with_busy_cursor">[docs]</a><span class="k">def</span> <span class="nf">with_busy_cursor</span><span class="p">(</span><span class="n">fn</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Decorator to show busy cursor for duration of fn call.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">busy_fn</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kw</span><span class="p">):</span>
        <span class="k">if</span> <span class="s">&#39;cursor&#39;</span> <span class="ow">in</span> <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">():</span>
            <span class="n">old_cursor</span><span class="o">=</span><span class="n">widget</span><span class="p">[</span><span class="s">&#39;cursor&#39;</span><span class="p">]</span>
            <span class="n">widget</span><span class="p">[</span><span class="s">&#39;cursor&#39;</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;watch&#39;</span>
            <span class="n">widget</span><span class="o">.</span><span class="n">update_idletasks</span><span class="p">()</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">fn</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span><span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kw</span><span class="p">)</span>
        <span class="k">finally</span><span class="p">:</span>
            <span class="c"># ensure old cursor is replaced even if fn() raises an</span>
            <span class="c"># error</span>
            <span class="k">if</span> <span class="s">&#39;cursor&#39;</span> <span class="ow">in</span> <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">():</span>
                <span class="n">widget</span><span class="p">[</span><span class="s">&#39;cursor&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">old_cursor</span>

    <span class="k">return</span> <span class="n">busy_fn</span>

</div>
<div class="viewcode-block" id="PlotGroupPanel"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.PlotGroupPanel">[docs]</a><span class="k">class</span> <span class="nc">PlotGroupPanel</span><span class="p">(</span><span class="n">tk</span><span class="o">.</span><span class="n">TkParameterized</span><span class="p">,</span><span class="n">Frame</span><span class="p">):</span>

    <span class="n">__abstract</span> <span class="o">=</span> <span class="bp">True</span>


    <span class="n">dock</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">Boolean</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">doc</span><span class="o">=</span><span class="s">&quot;on console or not&quot;</span><span class="p">)</span>

    <span class="n">maximum_plot_history_length</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span><span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="bp">None</span><span class="p">),</span><span class="n">doc</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        Value of maximum plots history length. Larger number means a longer history </span>
<span class="s">        is kept and hence more memory is used. A length of -1 means keep all.&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="c"># Default size for images used on buttons</span>
    <span class="n">button_image_size</span><span class="o">=</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span>

    <span class="n">Refresh</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">image_path</span><span class="o">=</span><span class="s">&quot;tkgui/icons/redo-small.png&quot;</span><span class="p">,</span>
        <span class="n">size</span><span class="o">=</span><span class="n">button_image_size</span><span class="p">,</span>
        <span class="n">doc</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        Refresh the current plot (i.e. force the current plot to be regenerated</span>
<span class="s">        by executing pre_plot_hooks and plot_hooks).&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="n">Redraw</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">image_path</span><span class="o">=</span><span class="s">&quot;tkgui/icons/redo-small.png&quot;</span><span class="p">,</span>
        <span class="n">size</span><span class="o">=</span><span class="n">button_image_size</span><span class="p">,</span>
        <span class="n">doc</span><span class="o">=</span><span class="s">&quot;&quot;&quot;Redraw the plot from existing data (i.e. execute plot_hooks only).&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="n">Enlarge</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">image_path</span><span class="o">=</span><span class="s">&quot;tkgui/icons/viewmag+_2.2.png&quot;</span><span class="p">,</span>
        <span class="n">size</span><span class="o">=</span><span class="n">button_image_size</span><span class="p">,</span>
        <span class="n">doc</span><span class="o">=</span><span class="s">&quot;&quot;&quot;Increase the displayed size of the current plots by about 20%.&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="n">Reduce</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">image_path</span><span class="o">=</span><span class="s">&quot;tkgui/icons/viewmag-_2.1.png&quot;</span><span class="p">,</span>
        <span class="n">size</span><span class="o">=</span><span class="n">button_image_size</span><span class="p">,</span><span class="n">doc</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        Reduce the displayed size of the current plots by about 20%.</span>
<span class="s">        A minimum size that preserves at least one pixel per unit is</span>
<span class="s">        enforced, to ensure that no data is lost when displaying.&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="n">Fwd</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">image_path</span><span class="o">=</span><span class="s">&quot;tkgui/icons/forward-2.0.png&quot;</span><span class="p">,</span>
        <span class="n">size</span><span class="o">=</span><span class="n">button_image_size</span><span class="p">,</span><span class="n">doc</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        Move forward through the history of all the plots shown in this window.&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="n">Back</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">image_path</span><span class="o">=</span><span class="s">&quot;tkgui/icons/back-2.0.png&quot;</span><span class="p">,</span>
        <span class="n">size</span><span class="o">=</span><span class="n">button_image_size</span><span class="p">,</span><span class="n">doc</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        Move backward through the history of all the plots shown in</span>
<span class="s">        this window.  When showing a historical plot, some functions</span>
<span class="s">        will be disabled, because the original data is no longer</span>
<span class="s">        available.&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="n">gui_desired_maximum_plot_height</span> <span class="o">=</span> <span class="n">param</span><span class="o">.</span><span class="n">Integer</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="mi">150</span><span class="p">,</span><span class="n">bounds</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="bp">None</span><span class="p">),</span><span class="n">doc</span><span class="o">=</span><span class="s">&quot;&quot;&quot;</span>
<span class="s">        Value to provide for PlotGroup.desired_maximum_plot_height for</span>
<span class="s">        PlotGroups opened by the GUI.  Determines the initial, default</span>
<span class="s">        scaling for the PlotGroup.&quot;&quot;&quot;</span><span class="p">)</span>

    <span class="c"># CB: is there a better way than using a property?</span>
    <span class="k">def</span> <span class="nf">get_plotgroup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_extraPO</span>
    <span class="k">def</span> <span class="nf">set_plotgroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">new_pg</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">change_PO</span><span class="p">(</span><span class="n">new_pg</span><span class="p">)</span>

    <span class="n">plotgroup</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">get_plotgroup</span><span class="p">,</span><span class="n">set_plotgroup</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">plotgroup</span><span class="p">,</span><span class="o">**</span><span class="n">params</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If your parameter should be available in history, add its name</span>
<span class="sd">        to the params_in_history list, otherwise it will be disabled</span>
<span class="sd">        in historical views.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">tk</span><span class="o">.</span><span class="n">TkParameterized</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">extraPO</span><span class="o">=</span><span class="n">plotgroup</span><span class="p">,</span>
                                    <span class="n">msg_handler</span><span class="o">=</span><span class="n">master</span><span class="o">.</span><span class="n">status</span><span class="p">,</span>
                                    <span class="o">**</span><span class="n">params</span><span class="p">)</span>
        <span class="n">Frame</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">master</span><span class="o">.</span><span class="n">content</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span> <span class="o">=</span> <span class="n">master</span> <span class="c">#CEBALERT</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setup_plotgroup</span><span class="p">()</span>





        <span class="bp">self</span><span class="o">.</span><span class="n">canvases</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_labels</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="c">### JCALERT! Figure out why we need that!</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_num_labels</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">plotgroups_history</span><span class="o">=</span><span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">history_index</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params_in_history</span> <span class="o">=</span> <span class="p">[]</span> <span class="c"># parameters valid to adjust in history</span>

        <span class="c"># Factor for reducing or enlarging the Plots (where 1.2 = 20% change)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_factor</span> <span class="o">=</span> <span class="mf">1.2</span>

        <span class="c"># CEBALERT: rename these frames</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control_frame_1</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">master</span><span class="o">.</span><span class="n">noscroll</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control_frame_1</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">TOP</span><span class="p">,</span><span class="n">expand</span><span class="o">=</span><span class="n">NO</span><span class="p">,</span><span class="n">fill</span><span class="o">=</span><span class="n">X</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">control_frame_2</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">master</span><span class="o">.</span><span class="n">noscroll</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control_frame_2</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">TOP</span><span class="p">,</span><span class="n">expand</span><span class="o">=</span><span class="n">NO</span><span class="p">,</span><span class="n">fill</span><span class="o">=</span><span class="n">X</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">plot_frame</span> <span class="o">=</span> <span class="n">Tkinter</span><span class="o">.</span><span class="n">LabelFrame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_frame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">TOP</span><span class="p">,</span><span class="n">expand</span><span class="o">=</span><span class="n">YES</span><span class="p">,</span><span class="n">fill</span><span class="o">=</span><span class="n">BOTH</span><span class="p">)</span><span class="c">#,padx=5,pady=5)</span>

        <span class="c"># CB: why did I need a new frame after switching to 8.5?</span>
        <span class="c"># I&#39;ve forgotten what i changed.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_container</span> <span class="o">=</span> <span class="n">Tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_frame</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plot_container</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">anchor</span><span class="o">=</span><span class="s">&quot;center&quot;</span><span class="p">)</span>


        <span class="c"># Label does have a wraplength option...but it&#39;s in screen</span>
        <span class="c"># units. Surely tk has a function to convert between</span>
        <span class="c"># text and screen units?</span>
        <span class="n">no_plot_note_text</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">Press Refresh on the pre-plot hooks to generate the plot, after modifying the hooks below if necessary. Note that Refreshing may take some time.</span>

<span class="s">Many hooks accept &#39;display=True&#39; so that the progress can be viewed in an open Activity window, e.g. for debugging.</span>
<span class="s">&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">no_plot_note</span><span class="o">=</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_container</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="n">no_plot_note_text</span><span class="p">,</span>
                                <span class="n">justify</span><span class="o">=</span><span class="s">&quot;center&quot;</span><span class="p">,</span><span class="n">wraplength</span><span class="o">=</span><span class="mi">350</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">no_plot_note_enabled</span><span class="o">=</span><span class="bp">False</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">control_frame_3</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">master</span><span class="o">.</span><span class="n">noscroll_bottom</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control_frame_3</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">TOP</span><span class="p">,</span><span class="n">expand</span><span class="o">=</span><span class="n">NO</span><span class="p">,</span><span class="n">fill</span><span class="o">=</span><span class="n">X</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">control_frame_4</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">control_frame_4</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">TOP</span><span class="p">,</span><span class="n">expand</span><span class="o">=</span><span class="n">NO</span><span class="p">,</span><span class="n">fill</span><span class="o">=</span><span class="n">NONE</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">updatecommand_frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">control_frame_3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">updatecommand_frame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">TOP</span><span class="p">,</span><span class="n">expand</span><span class="o">=</span><span class="n">YES</span><span class="p">,</span><span class="n">fill</span><span class="o">=</span><span class="n">X</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">plotcommand_frame</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">control_frame_3</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotcommand_frame</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">TOP</span><span class="p">,</span><span class="n">expand</span><span class="o">=</span><span class="n">YES</span><span class="p">,</span><span class="n">fill</span><span class="o">=</span><span class="n">X</span><span class="p">)</span>


        <span class="c"># CEBALERT: replace</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">messageBar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">status</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pack_param</span><span class="p">(</span><span class="s">&#39;pre_plot_hooks&#39;</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">updatecommand_frame</span><span class="p">,</span>
                        <span class="n">expand</span><span class="o">=</span><span class="s">&#39;yes&#39;</span><span class="p">,</span><span class="n">fill</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="n">side</span><span class="o">=</span><span class="s">&#39;left&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pack_param</span><span class="p">(</span><span class="s">&#39;Refresh&#39;</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">updatecommand_frame</span><span class="p">,</span>
                        <span class="n">on_set</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">,</span><span class="n">side</span><span class="o">=</span><span class="s">&#39;right&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params_in_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;Refresh&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pack_param</span><span class="p">(</span><span class="s">&#39;plot_hooks&#39;</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotcommand_frame</span><span class="p">,</span>
                        <span class="n">expand</span><span class="o">=</span><span class="s">&#39;yes&#39;</span><span class="p">,</span><span class="n">fill</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">,</span><span class="n">side</span><span class="o">=</span><span class="s">&#39;left&#39;</span><span class="p">)</span>
        <span class="c"># CEBALERT: should disable unless data exists.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pack_param</span><span class="p">(</span><span class="s">&#39;Redraw&#39;</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotcommand_frame</span><span class="p">,</span>
                        <span class="n">on_set</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">redraw_plots</span><span class="p">,</span><span class="n">side</span><span class="o">=</span><span class="s">&#39;right&#39;</span><span class="p">)</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">pack_param</span><span class="p">(</span><span class="s">&#39;Enlarge&#39;</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">control_frame_1</span><span class="p">,</span>
                        <span class="n">on_set</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">enlarge_plots</span><span class="p">,</span><span class="n">side</span><span class="o">=</span><span class="n">LEFT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params_in_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;Enlarge&#39;</span><span class="p">)</span> <span class="c"># CEBNOTE: while it&#39;s a GUI op</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pack_param</span><span class="p">(</span><span class="s">&#39;Reduce&#39;</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">control_frame_1</span><span class="p">,</span>
                        <span class="n">on_set</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">reduce_plots</span><span class="p">,</span><span class="n">side</span><span class="o">=</span><span class="n">LEFT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params_in_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;Reduce&#39;</span><span class="p">)</span>


        <span class="k">if</span> <span class="n">topo</span><span class="o">.</span><span class="n">tkgui</span><span class="o">.</span><span class="n">TK_SUPPORTS_DOCK</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">pack_param</span><span class="p">(</span><span class="s">&quot;dock&quot;</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">control_frame_1</span><span class="p">,</span>
                            <span class="n">on_set</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">set_dock</span><span class="p">,</span><span class="n">side</span><span class="o">=</span><span class="n">LEFT</span><span class="p">)</span>


        <span class="c"># Don&#39;t need to add these two to params_in_history because their</span>
        <span class="c"># availability is controlled separately (determined by what&#39;s</span>
        <span class="c"># in the history)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pack_param</span><span class="p">(</span><span class="s">&#39;Back&#39;</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">control_frame_2</span><span class="p">,</span>
                        <span class="n">on_set</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="o">=-</span><span class="mi">1</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">navigate_pg_history</span><span class="p">(</span><span class="n">x</span><span class="p">),</span>
                        <span class="n">side</span><span class="o">=</span><span class="n">LEFT</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pack_param</span><span class="p">(</span><span class="s">&#39;Fwd&#39;</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">control_frame_2</span><span class="p">,</span>
                        <span class="n">on_set</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="o">=+</span><span class="mi">1</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">navigate_pg_history</span><span class="p">(</span><span class="n">x</span><span class="p">),</span>
                        <span class="n">side</span><span class="o">=</span><span class="n">LEFT</span><span class="p">)</span>




        <span class="c">#################### RIGHT-CLICK MENU STUFF ####################</span>
        <span class="c">### Right-click menu for canvases; subclasses can add cascades</span>
        <span class="c">### or insert commands on the existing cascades.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_menu</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Menu</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tearoff</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span> <span class="c">#self.context_menu</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_unit_menu</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Menu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_canvas_menu</span><span class="p">,</span> <span class="n">tearoff</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_menu</span><span class="o">.</span><span class="n">add_cascade</span><span class="p">(</span><span class="n">menu</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_unit_menu</span><span class="p">,</span><span class="n">state</span><span class="o">=</span><span class="n">DISABLED</span><span class="p">,</span>
                                      <span class="n">indexname</span><span class="o">=</span><span class="s">&#39;unit_menu&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_menu</span><span class="o">.</span><span class="n">add_separator</span><span class="p">()</span>

        <span class="c"># CEBALERT: scheme for enabling/disabling menu items (&#39;disable</span>
        <span class="c"># items hack&#39;) needs to be generalized. What we have now is</span>
        <span class="c"># just a mechanism to disable/enable cfs/rfs plots as</span>
        <span class="c"># necessary. Hack includes the attribute below as well as</span>
        <span class="c"># other items marked &#39;disable items hack&#39;.</span>
        <span class="c"># (Note that tk 8.5 has better handling of state switching</span>
        <span class="c"># (using flags for each state, I think), so presumably this</span>
        <span class="c"># can be cleaned up easily.)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unit_menu_updaters</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_sheet_menu</span> <span class="o">=</span> <span class="n">tk</span><span class="o">.</span><span class="n">Menu</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_canvas_menu</span><span class="p">,</span> <span class="n">tearoff</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_menu</span><span class="o">.</span><span class="n">add_cascade</span><span class="p">(</span><span class="n">menu</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_sheet_menu</span><span class="p">,</span><span class="n">state</span><span class="o">=</span><span class="n">DISABLED</span><span class="p">,</span>
                                      <span class="n">indexname</span><span class="o">=</span><span class="s">&#39;sheet_menu&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_menu</span><span class="o">.</span><span class="n">add_separator</span><span class="p">()</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">update_plot_frame</span><span class="p">(</span><span class="n">plots</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>

        <span class="c">#################################################################</span>

        <span class="c"># CB: don&#39;t forget to include ctrl-q</span>
        <span class="c"># import __main__; __main__.__dict__[&#39;qqq&#39;]=self</span>


    <span class="k">def</span> <span class="nf">set_dock</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dock</span><span class="p">:</span>
            <span class="n">topo</span><span class="o">.</span><span class="n">guimain</span><span class="o">.</span><span class="n">some_area</span><span class="o">.</span><span class="n">consume</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refresh_title</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">topo</span><span class="o">.</span><span class="n">guimain</span><span class="o">.</span><span class="n">some_area</span><span class="o">.</span><span class="n">eject</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refresh_title</span><span class="p">()</span>



<div class="viewcode-block" id="PlotGroupPanel.setup_plotgroup"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.PlotGroupPanel.setup_plotgroup">[docs]</a>    <span class="k">def</span> <span class="nf">setup_plotgroup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Perform any necessary initialization of the plotgroup.</span>

<span class="sd">        Subclasses can use this to set Parameters on their PlotGroups.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">.</span><span class="n">desired_maximum_plot_height</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">gui_desired_maximum_plot_height</span>

</div>
    <span class="k">def</span> <span class="nf">__process_canvas_event</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event</span><span class="p">,</span><span class="n">func</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return a dictionary containing the event itself, and, if the</span>
<span class="sd">        event occurs on a plot of a sheet, store the plot and the</span>
<span class="sd">        coordinates ((r,c) and (x,y) for the cell center) on the sheet.</span>

<span class="sd">        Then, call func.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c"># CB: I want this to be called for all the canvas events - see</span>
        <span class="c"># ALERT by canvas button bindings. Surely can do better than</span>
        <span class="c"># just passing func through.</span>
        <span class="n">plot</span><span class="o">=</span><span class="n">event</span><span class="o">.</span><span class="n">widget</span><span class="o">.</span><span class="n">plot</span>
        <span class="n">event_info</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;event&#39;</span><span class="p">:</span><span class="n">event</span><span class="p">}</span> <span class="c"># store event in case more info needed elsewhere</span>

        <span class="c"># Later functions assume that if event_info does not contain</span>
        <span class="c"># &#39;plot&#39;, then the event did not occur on a plot of a sheet.</span>
        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_src_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="s">&#39;&#39;</span><span class="p">:</span>
            <span class="n">plot_width</span><span class="p">,</span><span class="n">plot_height</span><span class="o">=</span><span class="n">plot</span><span class="o">.</span><span class="n">bitmap</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span><span class="n">plot</span><span class="o">.</span><span class="n">bitmap</span><span class="o">.</span><span class="n">height</span><span class="p">()</span>
            <span class="k">if</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="o">&lt;</span><span class="n">plot_width</span> <span class="ow">and</span> <span class="mi">0</span><span class="o">&lt;=</span><span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="o">&lt;</span><span class="n">plot_height</span><span class="p">:</span>
                <span class="n">left</span><span class="p">,</span><span class="n">bottom</span><span class="p">,</span><span class="n">right</span><span class="p">,</span><span class="n">top</span><span class="o">=</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_bounding_box</span><span class="o">.</span><span class="n">lbrt</span><span class="p">()</span>
                <span class="c"># float() to avoid integer division</span>
                <span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="n">right</span><span class="o">-</span><span class="n">left</span><span class="p">)</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">x</span><span class="p">)</span><span class="o">/</span><span class="n">plot_width</span> <span class="o">+</span> <span class="n">left</span>
                <span class="n">y</span> <span class="o">=</span> <span class="n">top</span> <span class="o">-</span> <span class="p">(</span><span class="n">top</span><span class="o">-</span><span class="n">bottom</span><span class="p">)</span><span class="o">*</span><span class="nb">float</span><span class="p">(</span><span class="n">event</span><span class="o">.</span><span class="n">y</span><span class="p">)</span><span class="o">/</span><span class="n">plot_height</span>
                <span class="n">r</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="n">topo</span><span class="o">.</span><span class="n">sim</span><span class="p">[</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_src_name</span><span class="p">]</span><span class="o">.</span><span class="n">sheet2matrixidx</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
                <span class="n">event_info</span><span class="p">[</span><span class="s">&#39;plot&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">plot</span>
                <span class="n">event_info</span><span class="p">[</span><span class="s">&#39;coords&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">),(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)]</span>

        <span class="n">func</span><span class="p">(</span><span class="n">event_info</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">_canvas_right_click</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event_info</span><span class="p">,</span><span class="n">show_menu</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update labels on right-click menu and popup the menu, plus store the event info</span>
<span class="sd">        for access by any menu commands that require it.</span>

<span class="sd">        If show_menu is False, popup menu is not displayed (in case subclasses</span>
<span class="sd">        wish to add extra menu items first).</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s">&#39;plot&#39;</span> <span class="ow">in</span> <span class="n">event_info</span><span class="p">:</span>
            <span class="n">plot</span> <span class="o">=</span> <span class="n">event_info</span><span class="p">[</span><span class="s">&#39;plot&#39;</span><span class="p">]</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_menu</span><span class="o">.</span><span class="n">entryconfig</span><span class="p">(</span><span class="s">&quot;sheet_menu&quot;</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s">&quot;Combined plot: </span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_src_name</span><span class="p">,</span><span class="n">plot</span><span class="o">.</span><span class="n">name</span><span class="p">),</span>
                <span class="n">state</span><span class="o">=</span><span class="n">NORMAL</span><span class="p">)</span>
            <span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">),(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">event_info</span><span class="p">[</span><span class="s">&#39;coords&#39;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_menu</span><span class="o">.</span><span class="n">entryconfig</span><span class="p">(</span><span class="s">&quot;unit_menu&quot;</span><span class="p">,</span>
                <span class="n">label</span><span class="o">=</span><span class="s">&quot;Single unit:(</span><span class="si">% 3d</span><span class="s">,</span><span class="si">% 3d</span><span class="s">) Coord:(</span><span class="si">% 2.2f</span><span class="s">,</span><span class="si">% 2.2f</span><span class="s">)&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span>
                <span class="n">state</span><span class="o">=</span><span class="n">NORMAL</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_right_click_info</span> <span class="o">=</span> <span class="n">event_info</span>

            <span class="c"># CB: part of disable items hack</span>
            <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_unit_menu_updaters</span><span class="o">.</span><span class="n">values</span><span class="p">():</span> <span class="n">v</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">show_menu</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_canvas_menu</span><span class="o">.</span><span class="n">tk_popup</span><span class="p">(</span><span class="n">event_info</span><span class="p">[</span><span class="s">&#39;event&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">x_root</span><span class="p">,</span>
                                           <span class="n">event_info</span><span class="p">[</span><span class="s">&#39;event&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">y_root</span><span class="p">)</span>




    <span class="k">def</span> <span class="nf">_update_dynamic_info</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event_info</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Update dynamic information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s">&#39;plot&#39;</span> <span class="ow">in</span> <span class="n">event_info</span><span class="p">:</span>
            <span class="n">plot</span> <span class="o">=</span> <span class="n">event_info</span><span class="p">[</span><span class="s">&#39;plot&#39;</span><span class="p">]</span>
            <span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">),(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="o">=</span> <span class="n">event_info</span><span class="p">[</span><span class="s">&#39;coords&#39;</span><span class="p">]</span>
            <span class="n">location_string</span><span class="o">=</span><span class="s">&quot;</span><span class="si">%s</span><span class="s"> Unit:(</span><span class="si">% 3d</span><span class="s">,</span><span class="si">% 3d</span><span class="s">) Coord:(</span><span class="si">% 2.2f</span><span class="s">,</span><span class="si">% 2.2f</span><span class="s">)&quot;</span><span class="o">%</span><span class="p">(</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_src_name</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
            <span class="c"># CB: isn&#39;t there a nicer way to allow more info to be added?</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">messageBar</span><span class="o">.</span><span class="n">dynamicinfo</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_dynamic_info_string</span><span class="p">(</span><span class="n">event_info</span><span class="p">,</span><span class="n">location_string</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">messageBar</span><span class="o">.</span><span class="n">dynamicinfo</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>




    <span class="k">def</span> <span class="nf">_dynamic_info_string</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">event_info</span><span class="p">,</span><span class="n">x</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Subclasses can override to add extra relevant information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">x</span>


    <span class="c"># rename (not specific to plot_frame)</span>
    <span class="c"># document, and make display_* methods semi-private methods</span>
<div class="viewcode-block" id="PlotGroupPanel.update_plot_frame"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.PlotGroupPanel.update_plot_frame">[docs]</a>    <span class="k">def</span> <span class="nf">update_plot_frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">plots</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">labels</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span><span class="n">geom</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        set geom True for any action that user would expect to lose</span>
<span class="sd">        his/her manual window size (e.g. pressing enlarge button)</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">plots</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">.</span><span class="n">scale_images</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">display_plots</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">labels</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">display_labels</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">refresh_title</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvases</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="c"># CEB: check that pack&#39;s ok here</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_plot_note</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">column</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span><span class="n">sticky</span><span class="o">=</span><span class="s">&#39;nsew&#39;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_plot_note_enabled</span><span class="o">=</span><span class="bp">True</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">representations</span><span class="p">[</span><span class="s">&#39;Enlarge&#39;</span><span class="p">][</span><span class="s">&#39;widget&#39;</span><span class="p">][</span><span class="s">&#39;state&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">DISABLED</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">representations</span><span class="p">[</span><span class="s">&#39;Reduce&#39;</span> <span class="p">][</span><span class="s">&#39;widget&#39;</span><span class="p">][</span><span class="s">&#39;state&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">DISABLED</span>

        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">no_plot_note_enabled</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_plot_note</span><span class="o">.</span><span class="n">grid_forget</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">no_plot_note_enabled</span><span class="o">=</span><span class="bp">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">representations</span><span class="p">[</span><span class="s">&#39;Enlarge&#39;</span><span class="p">][</span><span class="s">&#39;widget&#39;</span><span class="p">][</span><span class="s">&#39;state&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">NORMAL</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">representations</span><span class="p">[</span><span class="s">&#39;Reduce&#39;</span> <span class="p">][</span><span class="s">&#39;widget&#39;</span><span class="p">][</span><span class="s">&#39;state&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">NORMAL</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__update_widgets_for_history</span><span class="p">()</span>
        <span class="c"># have a general update_widgets method instead (that calls</span>
        <span class="c"># update_widgets_for_history; can it also include</span>
        <span class="c"># enlarge/reduce alterations?)</span>

        <span class="c"># CBALERT: problem when docked: this event isn&#39;t being caught,</span>
        <span class="c"># ie it doesn&#39;t end up going to the right place... (i.e. no</span>
        <span class="c"># scrollbars when docked).</span>
        <span class="c">#self.event_generate(&quot;&lt;&lt;SizeRight&gt;&gt;&quot;)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">sizeright</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">geom</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">geometry</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">TclError</span><span class="p">:</span>
                <span class="k">pass</span>

</div>
    <span class="nd">@with_busy_cursor</span>
    <span class="k">def</span> <span class="nf">refresh_plots</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call plotgroup&#39;s make_plots with update=True (i.e. run</span>
<span class="sd">        pre_plot_hooks and plot_hooks), then display the result.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">.</span><span class="n">make_plots</span><span class="p">(</span><span class="n">update</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_plot_frame</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_to_plotgroups_history</span><span class="p">()</span>


    <span class="nd">@with_busy_cursor</span>
    <span class="k">def</span> <span class="nf">redraw_plots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Call plotgroup&#39;s make_plots with update=False (i.e. run only</span>
<span class="sd">        plot_hooks, not pre_plot_hooks), then display the result.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">.</span><span class="n">make_plots</span><span class="p">(</span><span class="n">update</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_plot_frame</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>


<div class="viewcode-block" id="PlotGroupPanel.rescale_plots"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.PlotGroupPanel.rescale_plots">[docs]</a>    <span class="k">def</span> <span class="nf">rescale_plots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Rescale the existing plots, without calling either the</span>
<span class="sd">        plot_hooks or the pre_plot_hooks, then display the result.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">.</span><span class="n">scale_images</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_plot_frame</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">geom</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

</div>
<div class="viewcode-block" id="PlotGroupPanel.refresh"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.PlotGroupPanel.refresh">[docs]</a>    <span class="k">def</span> <span class="nf">refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">update</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Main steps for generating plots in the Frame.</span>

<span class="sd">        # if update is True, the SheetViews are re-generated</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c"># if we&#39;ve been looking in the history, now need to return to the &quot;current time&quot;</span>
        <span class="c"># plotgroup (but copy it: don&#39;t update the old one, which is a record of the previous state)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">history_index</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_switch_plotgroup</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotgroups_history</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">history_index</span> <span class="o">=</span> <span class="mi">0</span>

        <span class="k">if</span> <span class="n">update</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">refresh_plots</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">redraw_plots</span><span class="p">()</span>


    <span class="c"># CEBALERT: this method needs cleaning, along with its versions in subclasses.</span></div>
<div class="viewcode-block" id="PlotGroupPanel.display_plots"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.PlotGroupPanel.display_plots">[docs]</a>    <span class="k">def</span> <span class="nf">display_plots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>

<span class="sd">        This function should be redefined in subclasses for interesting</span>
<span class="sd">        things such as 2D grids.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">r</span><span class="o">*</span><span class="mi">2</span> <span class="k">for</span> <span class="p">(</span><span class="n">r</span><span class="p">,</span><span class="n">_</span><span class="p">,</span><span class="n">_</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">.</span><span class="n">coords</span><span class="p">]</span> <span class="c"># Alternate rows for labelling</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_cols</span> <span class="o">=</span> <span class="p">[</span><span class="n">c</span> <span class="k">for</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">_</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">.</span><span class="n">coords</span><span class="p">]</span>
        <span class="n">plots</span> <span class="o">=</span>      <span class="p">[</span><span class="n">p</span> <span class="k">for</span> <span class="p">(</span><span class="n">_</span><span class="p">,</span><span class="n">_</span><span class="p">,</span><span class="n">p</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">.</span><span class="n">coords</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomed_images</span> <span class="o">=</span> <span class="p">[</span><span class="n">ImageTk</span><span class="o">.</span><span class="n">PhotoImage</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">bitmap</span><span class="o">.</span><span class="n">image</span><span class="p">)</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">plots</span><span class="p">]</span>

        <span class="n">new_sizes</span> <span class="o">=</span> <span class="p">[(</span><span class="nb">str</span><span class="p">(</span><span class="n">zi</span><span class="o">.</span><span class="n">width</span><span class="p">()),</span>
                      <span class="nb">str</span><span class="p">(</span><span class="n">zi</span><span class="o">.</span><span class="n">height</span><span class="p">()))</span>
                     <span class="k">for</span> <span class="n">zi</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoomed_images</span><span class="p">]</span>
        <span class="n">old_sizes</span> <span class="o">=</span> <span class="p">[(</span><span class="n">canvas</span><span class="p">[</span><span class="s">&#39;width&#39;</span><span class="p">],</span><span class="n">canvas</span><span class="p">[</span><span class="s">&#39;height&#39;</span><span class="p">])</span>
                     <span class="k">for</span> <span class="n">canvas</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvases</span><span class="p">]</span>

        <span class="c"># If the number of canvases or their sizes has changed, then</span>
        <span class="c"># create a new set of canvases.  If the new images will fit into the</span>
        <span class="c"># old canvases, reuse them (prevents flicker)</span>


        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoomed_images</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvases</span><span class="p">)</span> <span class="ow">or</span> \
               <span class="n">new_sizes</span> <span class="o">!=</span> <span class="n">old_sizes</span><span class="p">:</span>
            <span class="c"># Need new canvases...</span>
            <span class="n">old_canvases</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">canvases</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">canvases</span> <span class="o">=</span> <span class="p">[</span><span class="n">Canvas</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_container</span><span class="p">,</span>
                                    <span class="n">width</span><span class="o">=</span><span class="n">image</span><span class="o">.</span><span class="n">width</span><span class="p">(),</span>
                                    <span class="n">height</span><span class="o">=</span><span class="n">image</span><span class="o">.</span><span class="n">height</span><span class="p">(),</span>
                                    <span class="n">borderwidth</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">highlightthickness</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                                    <span class="n">relief</span><span class="o">=</span><span class="s">&#39;groove&#39;</span><span class="p">)</span>
                             <span class="k">for</span> <span class="n">image</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">zoomed_images</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">image</span><span class="p">,</span><span class="n">canvas</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoomed_images</span><span class="p">)),</span>
                                      <span class="bp">self</span><span class="o">.</span><span class="n">zoomed_images</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">canvases</span><span class="p">):</span>
                <span class="n">canvas</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s">&quot;nw&quot;</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="n">image</span><span class="p">)</span>
                <span class="n">canvas</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rows</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">column</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_cols</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>


            <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">old_canvases</span><span class="p">:</span>
                <span class="n">c</span><span class="o">.</span><span class="n">grid_forget</span><span class="p">()</span>


        <span class="k">else</span><span class="p">:</span>
            <span class="c"># Don&#39;t need new canvases...</span>
            <span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">image</span><span class="p">,</span><span class="n">canvas</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoomed_images</span><span class="p">)),</span>
                                      <span class="bp">self</span><span class="o">.</span><span class="n">zoomed_images</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">canvases</span><span class="p">):</span>
                <span class="n">canvas</span><span class="o">.</span><span class="n">create_image</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">anchor</span><span class="o">=</span><span class="s">&quot;nw&quot;</span><span class="p">,</span><span class="n">image</span><span class="o">=</span><span class="n">image</span><span class="p">)</span>
                <span class="n">canvas</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rows</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">column</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_cols</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">padx</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_add_canvas_bindings</span><span class="p">()</span>

</div>
    <span class="k">def</span> <span class="nf">_add_canvas_bindings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="c">### plotting over; bind events to each canvas</span>
        <span class="k">for</span> <span class="n">plot</span><span class="p">,</span><span class="n">canvas</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">.</span><span class="n">plots</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">canvases</span><span class="p">):</span>
            <span class="c"># Store the corresponding plot with each canvas so that the</span>
            <span class="c"># plot information (e.g. scale_factor) will be available</span>
            <span class="c"># for the right_click menu.</span>
            <span class="n">canvas</span><span class="o">.</span><span class="n">plot</span><span class="o">=</span><span class="n">plot</span>
            <span class="c"># CEBALERT: I want process_canvas_event to be called for</span>
            <span class="c"># all of these bindings, with an additional method also</span>
            <span class="c"># called to do something specific to the action. I&#39;m sure</span>
            <span class="c"># python has something that lets this be done in a clearer</span>
            <span class="c"># way.</span>
            <span class="n">canvas</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&#39;&lt;&lt;right-click&gt;&gt;&#39;</span><span class="p">,</span><span class="k">lambda</span> <span class="n">event</span><span class="p">:</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">__process_canvas_event</span><span class="p">(</span><span class="n">event</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_canvas_right_click</span><span class="p">))</span>
            <span class="n">canvas</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&#39;&lt;Motion&gt;&#39;</span><span class="p">,</span><span class="k">lambda</span> <span class="n">event</span><span class="p">:</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">__process_canvas_event</span><span class="p">(</span><span class="n">event</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_update_dynamic_info</span><span class="p">))</span>

            <span class="n">canvas</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&#39;&lt;Leave&gt;&#39;</span><span class="p">,</span><span class="k">lambda</span> <span class="n">event</span><span class="p">:</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">__process_canvas_event</span><span class="p">(</span><span class="n">event</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_update_dynamic_info</span><span class="p">))</span>
            <span class="c"># When user has a menu up, it&#39;s often natural to click</span>
            <span class="c"># elsewhere to make the menu disappear. Need to update the</span>
            <span class="c"># dynamic information in that case. (Happens on OS X</span>
            <span class="c"># anyway, but needed on Win and linux.)</span>
            <span class="n">canvas</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s">&#39;&lt;Button-1&gt;&#39;</span><span class="p">,</span><span class="k">lambda</span> <span class="n">event</span><span class="p">:</span> \
                        <span class="bp">self</span><span class="o">.</span><span class="n">__process_canvas_event</span><span class="p">(</span><span class="n">event</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">_update_dynamic_info</span><span class="p">))</span>






<div class="viewcode-block" id="PlotGroupPanel.display_labels"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.PlotGroupPanel.display_labels">[docs]</a>    <span class="k">def</span> <span class="nf">display_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        This function should be redefined by subclasses to match any</span>
<span class="sd">        changes made to display__plots().  Depending on the situation,</span>
<span class="sd">        it may be useful to make this function a stub, and display the</span>
<span class="sd">        labels at the same time the images are displayed.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvases</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">pass</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_num_labels</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvases</span><span class="p">):</span>
            <span class="n">old_labels</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">plot_labels</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot_labels</span> <span class="o">=</span> <span class="p">[</span><span class="n">Label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_container</span><span class="p">,</span><span class="n">text</span><span class="o">=</span><span class="n">each</span><span class="p">)</span>
                                 <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">.</span><span class="n">labels</span><span class="p">]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_labels</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_labels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="n">row</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_rows</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="n">column</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_cols</span><span class="p">[</span><span class="n">i</span><span class="p">],</span><span class="n">sticky</span><span class="o">=</span><span class="n">NSEW</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">l</span> <span class="ow">in</span> <span class="n">old_labels</span><span class="p">:</span>
                <span class="n">l</span><span class="o">.</span><span class="n">grid_forget</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_num_labels</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvases</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>  <span class="c"># Same number of labels; reuse to avoid flickering.</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plot_labels</span><span class="p">)):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot_labels</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">.</span><span class="n">labels</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>



    <span class="c"># CEBERRORALERT (minor): if no plot&#39;s displayed and I click</span>
    <span class="c"># enlarge, then the enlarge button gets disabled. If I then press</span>
    <span class="c"># refresh to get a plot, I can&#39;t enlarge it because the button&#39;s</span>
    <span class="c"># disabled. Probably need to reset button status if the plots</span>
    <span class="c"># change.</span></div>
<div class="viewcode-block" id="PlotGroupPanel.reduce_plots"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.PlotGroupPanel.reduce_plots">[docs]</a>    <span class="k">def</span> <span class="nf">reduce_plots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Function called by widget to reduce the plot size, when possible.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">.</span><span class="n">scale_images</span><span class="p">(</span><span class="mf">1.0</span><span class="o">/</span><span class="bp">self</span><span class="o">.</span><span class="n">zoom_factor</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">representations</span><span class="p">[</span><span class="s">&#39;Reduce&#39;</span><span class="p">][</span><span class="s">&#39;widget&#39;</span><span class="p">][</span><span class="s">&#39;state&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">DISABLED</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">representations</span><span class="p">[</span><span class="s">&#39;Enlarge&#39;</span><span class="p">][</span><span class="s">&#39;widget&#39;</span><span class="p">][</span><span class="s">&#39;state&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">NORMAL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_plot_frame</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">geom</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</div>
<div class="viewcode-block" id="PlotGroupPanel.enlarge_plots"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.PlotGroupPanel.enlarge_plots">[docs]</a>    <span class="k">def</span> <span class="nf">enlarge_plots</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Function called by widget to increase the plot size, when possible.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">.</span><span class="n">scale_images</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">zoom_factor</span><span class="p">)):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">representations</span><span class="p">[</span><span class="s">&#39;Enlarge&#39;</span><span class="p">][</span><span class="s">&#39;widget&#39;</span><span class="p">][</span><span class="s">&#39;state&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">DISABLED</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">representations</span><span class="p">[</span><span class="s">&#39;Reduce&#39;</span><span class="p">][</span><span class="s">&#39;widget&#39;</span><span class="p">][</span><span class="s">&#39;state&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">NORMAL</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_plot_frame</span><span class="p">(</span><span class="n">labels</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span><span class="n">geom</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>


<span class="c">######################################################################</span>
<span class="c">### HISTORY METHODS</span>

    <span class="c"># CEBERRORALERT: history grows and grows! Consider what happens when</span>
    <span class="c"># a window&#39;s open with auto-refresh and many plots are generated</span>
    <span class="c"># (e.g. measure_rfs). And plotgroups might be much bigger than they</span>
    <span class="c"># need to be.</span>

    <span class="c"># CEBALERT: in a history research, a disabled widget does not display</span>
    <span class="c"># up-to-date information (e.g. normalize checkbutton doesn&#39;t change).</span></div>
<div class="viewcode-block" id="PlotGroupPanel.add_to_plotgroups_history"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.PlotGroupPanel.add_to_plotgroups_history">[docs]</a>    <span class="k">def</span> <span class="nf">add_to_plotgroups_history</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        If there are plots on display, and we&#39;re not doing a history research,</span>
<span class="sd">        the plotgroup is stored in the history depending on the parameter </span>
<span class="sd">        maximum_plot_history_length. If this parameter is -1, history is unlimited</span>
<span class="sd">        (except by your machine memory!!). If it is 0, then no history is saved. If</span>
<span class="sd">        it is N, then up to N plots are saved in history.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">history_index</span><span class="o">==</span><span class="mi">0</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">canvases</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>
            <span class="c"># Only keep history length</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotgroups_history</span><span class="p">)</span> <span class="o">&gt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">maximum_plot_history_length</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">plotgroups_history</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
                <span class="k">except</span> <span class="ne">IndexError</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">maximum_plot_history_length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plotgroups_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__update_widgets_for_history</span><span class="p">()</span>
</div>
    <span class="k">def</span> <span class="nf">__set_widget_state</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">widget</span><span class="p">,</span><span class="n">state</span><span class="p">):</span>
        <span class="c"># sets the widget&#39;s state to state, unless state==&#39;normal&#39;</span>
        <span class="c"># and the widget&#39;s current state is &#39;readonly&#39;, in which</span>
        <span class="c"># case readonly is preserved.</span>
        <span class="c"># If a widget state was set to &#39;disabled&#39; deliberately, this</span>
        <span class="c"># will have the unwanted effect of enabling that widget.</span>
        <span class="c"># Surely there&#39;s a better way than this!</span>
        <span class="c"># (Probably the history stuff should store the old state</span>
        <span class="c"># on the widget somewhere. That would also eliminate the</span>
        <span class="c"># combobox-specific hack.)</span>

        <span class="c"># CEBALERT: I guess some widgets don&#39;t have state?</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">current_state</span> <span class="o">=</span> <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="s">&#39;state&#39;</span><span class="p">)[</span><span class="mi">3</span><span class="p">]</span>  <span class="c"># pyflakes:ignore (try/except test)</span>
        <span class="k">except</span> <span class="n">TclError</span><span class="p">:</span>
            <span class="k">return</span>

        <span class="c">### hack to deal with combobox: see tkparameterizedobject&#39;s</span>
        <span class="c">###  create_selector_widget().</span>
        <span class="k">if</span> <span class="n">state</span><span class="o">==</span><span class="s">&#39;normal&#39;</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span><span class="s">&#39;_readonly_&#39;</span><span class="p">):</span>
                <span class="n">state</span><span class="o">=</span><span class="s">&#39;readonly&#39;</span>
        <span class="c">###########################################################</span>

        <span class="n">widget</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">__update_widgets_for_history</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        The plotgroup&#39;s non-history widgets are all irrelevant when the plotgroup&#39;s from</span>
<span class="sd">        history.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">history_index</span><span class="o">!=</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">state</span><span class="o">=</span> <span class="s">&#39;disabled&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="s">&#39;normal&#39;</span>

        <span class="n">widgets_to_update</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">representations</span><span class="p">[</span><span class="n">p_name</span><span class="p">][</span><span class="s">&#39;widget&#39;</span><span class="p">]</span>
                             <span class="k">for</span> <span class="n">p_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">representations</span>
                             <span class="k">if</span> <span class="n">p_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">params_in_history</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">widget</span> <span class="ow">in</span> <span class="n">widgets_to_update</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">__set_widget_state</span><span class="p">(</span><span class="n">widget</span><span class="p">,</span><span class="n">state</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__update_history_buttons</span><span class="p">()</span>


    <span class="k">def</span> <span class="nf">__update_history_buttons</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Enable/disable the back and forward buttons depending on</span>
<span class="sd">        where we are in a history research.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">space_back</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotgroups_history</span><span class="p">)</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">history_index</span><span class="o">-</span><span class="mi">1</span>
        <span class="n">space_fwd</span>  <span class="o">=</span> <span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">history_index</span>

        <span class="n">back_button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">representations</span><span class="p">[</span><span class="s">&#39;Back&#39;</span><span class="p">][</span><span class="s">&#39;widget&#39;</span><span class="p">]</span>
        <span class="n">forward_button</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">representations</span><span class="p">[</span><span class="s">&#39;Fwd&#39;</span><span class="p">][</span><span class="s">&#39;widget&#39;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">space_back</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">back_button</span><span class="p">[</span><span class="s">&#39;state&#39;</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;normal&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">back_button</span><span class="p">[</span><span class="s">&#39;state&#39;</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;disabled&#39;</span>

        <span class="k">if</span> <span class="n">space_fwd</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">:</span>
            <span class="n">forward_button</span><span class="p">[</span><span class="s">&#39;state&#39;</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;normal&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">forward_button</span><span class="p">[</span><span class="s">&#39;state&#39;</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;disabled&#39;</span>

    <span class="c"># JLENHANCEMENT: It would be nice to be able to scroll back through many</span>
    <span class="c"># iterations.  Could put in a box for entering either the iteration</span>
    <span class="c"># number you want to view, or perhaps how many you want to jump...</span>
    <span class="k">def</span> <span class="nf">navigate_pg_history</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">steps</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">history_index</span><span class="o">+=</span><span class="n">steps</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_switch_plotgroup</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotgroups_history</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotgroups_history</span><span class="p">)</span><span class="o">+</span><span class="bp">self</span><span class="o">.</span><span class="n">history_index</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">update_plot_frame</span><span class="p">()</span>

<span class="c">######################################################################</span>


    <span class="k">def</span> <span class="nf">_switch_plotgroup</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">newpg</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Switch to a different plotgroup, e.g. one from the history buffer.</span>
<span class="sd">        Preserves some attributes from the current plotgroup that can apply</span>
<span class="sd">        across history, but leaves the others as-is.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">oldpg</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span>

        <span class="n">newpg</span><span class="o">.</span><span class="n">desired_maximum_plot_height</span><span class="o">=</span><span class="n">oldpg</span><span class="o">.</span><span class="n">desired_maximum_plot_height</span>
        <span class="n">newpg</span><span class="o">.</span><span class="n">sheet_coords</span><span class="o">=</span><span class="n">oldpg</span><span class="o">.</span><span class="n">sheet_coords</span>
        <span class="n">newpg</span><span class="o">.</span><span class="n">integer_scaling</span><span class="o">=</span><span class="n">oldpg</span><span class="o">.</span><span class="n">integer_scaling</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">=</span><span class="n">newpg</span>


<span class="c">###########################################################</span>



    <span class="k">def</span> <span class="nf">_plot_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Provide a string describing the current set of plots.</span>

<span class="sd">        Override in subclasses to provide more information.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> at time </span><span class="si">%s</span><span class="s">&quot;</span><span class="o">%</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">topo</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">timestr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">plotgroup</span><span class="o">.</span><span class="n">time</span><span class="p">))</span>


    <span class="c"># rename to refresh_titles</span>
<div class="viewcode-block" id="PlotGroupPanel.refresh_title"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.PlotGroupPanel.refresh_title">[docs]</a>    <span class="k">def</span> <span class="nf">refresh_title</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Set Window title and plot frame&#39;s title.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">title</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_title</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">plot_frame</span><span class="o">.</span><span class="n">configure</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">title</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">topo</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">name</span><span class="p">)</span><span class="o">+</span><span class="s">&quot;: &quot;</span><span class="o">+</span><span class="n">title</span><span class="p">)</span>
        <span class="c"># JABALERT: Used to say .replace(&quot; at time &quot;,&quot;/&quot;); was there a reason?</span>
</div>
<div class="viewcode-block" id="PlotGroupPanel.destroy"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.PlotGroupPanel.destroy">[docs]</a>    <span class="k">def</span> <span class="nf">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;overrides toplevel destroy, adding removal from autorefresh panels&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="n">topo</span><span class="o">.</span><span class="n">guimain</span><span class="o">.</span><span class="n">auto_refresh_panels</span><span class="p">:</span>
            <span class="n">topo</span><span class="o">.</span><span class="n">guimain</span><span class="o">.</span><span class="n">auto_refresh_panels</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">Frame</span><span class="o">.</span><span class="n">destroy</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


</div></div>
<div class="viewcode-block" id="SheetPanel"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.SheetPanel">[docs]</a><span class="k">class</span> <span class="nc">SheetPanel</span><span class="p">(</span><span class="n">PlotGroupPanel</span><span class="p">):</span>

    <span class="n">sheet_type</span> <span class="o">=</span> <span class="n">Sheet</span>

    <span class="nd">@classmethod</span>
<div class="viewcode-block" id="SheetPanel.valid_context"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.SheetPanel.valid_context">[docs]</a>    <span class="k">def</span> <span class="nf">valid_context</span><span class="p">(</span><span class="n">cls</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return true if there appears to be data available for this type of plot.</span>

<span class="sd">        To avoid confusing error messages, this method should be</span>
<span class="sd">        defined to return False in the case where there is no</span>
<span class="sd">        appropriate data to plot.  This information can be used to,</span>
<span class="sd">        e.g., gray out the appropriate menu item.</span>
<span class="sd">        By default, PlotPanels are assumed to be valid only for</span>
<span class="sd">        simulations that contain at least one Sheet.  Subclasses with</span>
<span class="sd">        more specific requirements should override this method with</span>
<span class="sd">        something more appropriate.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">topo</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">cls</span><span class="o">.</span><span class="n">sheet_type</span><span class="p">)</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">return</span> <span class="bp">True</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span>

</div>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">master</span><span class="p">,</span><span class="n">plotgroup</span><span class="p">,</span><span class="o">**</span><span class="n">params</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">SheetPanel</span><span class="p">,</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">master</span><span class="p">,</span><span class="n">plotgroup</span><span class="p">,</span><span class="o">**</span><span class="n">params</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">pack_param</span><span class="p">(</span><span class="s">&#39;auto_refresh&#39;</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">control_frame_1</span><span class="p">,</span>
                        <span class="n">on_set</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">set_auto_refresh</span><span class="p">,</span>
                        <span class="n">side</span><span class="o">=</span><span class="n">RIGHT</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params_in_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;auto_refresh&#39;</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">auto_refresh</span><span class="p">:</span>
            <span class="n">topo</span><span class="o">.</span><span class="n">guimain</span><span class="o">.</span><span class="n">auto_refresh_panels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


        <span class="bp">self</span><span class="o">.</span><span class="n">pack_param</span><span class="p">(</span><span class="s">&#39;normalize&#39;</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">control_frame_1</span><span class="p">,</span>
                        <span class="n">on_set</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">redraw_plots</span><span class="p">,</span><span class="n">side</span><span class="o">=</span><span class="s">&quot;right&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pack_param</span><span class="p">(</span><span class="s">&#39;integer_scaling&#39;</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">control_frame_2</span><span class="p">,</span>
                        <span class="n">on_set</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rescale_plots</span><span class="p">,</span><span class="n">side</span><span class="o">=</span><span class="s">&#39;right&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">pack_param</span><span class="p">(</span><span class="s">&#39;sheet_coords&#39;</span><span class="p">,</span><span class="n">parent</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">control_frame_2</span><span class="p">,</span>
                        <span class="n">on_set</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">rescale_plots</span><span class="p">,</span><span class="n">side</span><span class="o">=</span><span class="s">&#39;right&#39;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">params_in_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;sheet_coords&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">params_in_history</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&#39;integer_scaling&#39;</span><span class="p">)</span>



        <span class="bp">self</span><span class="o">.</span><span class="n">_unit_menu</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&#39;Connection Fields&#39;</span><span class="p">,</span><span class="n">indexname</span><span class="o">=</span><span class="s">&#39;connection_fields&#39;</span><span class="p">,</span>
                                    <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_connection_fields_window</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_unit_menu</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&#39;Receptive Field&#39;</span><span class="p">,</span>
                                    <span class="n">indexname</span><span class="o">=</span><span class="s">&#39;receptive_field&#39;</span><span class="p">,</span>
                                    <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_receptive_field_window</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_unit_menu</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s">&#39;Orientation Tuning Curves&#39;</span><span class="p">,</span>
                                    <span class="n">indexname</span><span class="o">=</span><span class="s">&#39;or tuning curve&#39;</span><span class="p">,</span>
                                    <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_or_tuning_curve_window</span><span class="p">)</span>

<span class="c">###### part of disable items hack #####</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unit_menu_updaters</span><span class="p">[</span><span class="s">&#39;connection_fields&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_for_cfs</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unit_menu_updaters</span><span class="p">[</span><span class="s">&#39;receptive_field&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">check_for_rfs</span>

    <span class="k">def</span> <span class="nf">check_for_cfs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">plot</span><span class="p">):</span>
        <span class="n">show_cfs</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_src_name</span> <span class="ow">in</span> <span class="n">topo</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">objects</span><span class="p">():</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">topo</span><span class="o">.</span><span class="n">sim</span><span class="p">[</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_src_name</span><span class="p">],</span><span class="n">CFSheet</span><span class="p">):</span>
                <span class="n">show_cfs</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">__showhide</span><span class="p">(</span><span class="s">&quot;connection_fields&quot;</span><span class="p">,</span><span class="n">show_cfs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">check_for_rfs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">plot</span><span class="p">):</span>
        <span class="n">show_rfs</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">if</span> <span class="n">plot</span><span class="o">.</span><span class="n">plot_src_name</span> <span class="ow">in</span> <span class="n">topo</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">objects</span><span class="p">():</span>
            <span class="n">sheet</span> <span class="o">=</span> <span class="n">topo</span><span class="o">.</span><span class="n">sim</span><span class="p">[</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_src_name</span><span class="p">]</span>

            <span class="c"># RFHACK: if any one generator has RF views for this sheet, then enable the menu option</span>
            <span class="c"># At the moment, just a hack to prevent menu option for generator sheets.</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sheet</span><span class="p">,</span><span class="n">GeneratorSheet</span><span class="p">):</span>
                <span class="n">show_rfs</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">show_rfs</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">__showhide</span><span class="p">(</span><span class="s">&quot;receptive_field&quot;</span><span class="p">,</span><span class="n">show_rfs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__showhide</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">show</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">show</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="s">&#39;normal&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">state</span> <span class="o">=</span> <span class="s">&#39;disabled&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_unit_menu</span><span class="o">.</span><span class="n">entryconfig</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="n">state</span><span class="o">=</span><span class="n">state</span><span class="p">)</span>
<span class="c">#######################################</span>


<div class="viewcode-block" id="SheetPanel.set_auto_refresh"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.SheetPanel.set_auto_refresh">[docs]</a>    <span class="k">def</span> <span class="nf">set_auto_refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Add or remove this panel from the console&#39;s</span>
<span class="sd">        auto_refresh_panels list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">auto_refresh</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="bp">self</span> <span class="ow">in</span> <span class="n">topo</span><span class="o">.</span><span class="n">guimain</span><span class="o">.</span><span class="n">auto_refresh_panels</span><span class="p">):</span>
                <span class="n">topo</span><span class="o">.</span><span class="n">guimain</span><span class="o">.</span><span class="n">auto_refresh_panels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span> <span class="ow">in</span> <span class="n">topo</span><span class="o">.</span><span class="n">guimain</span><span class="o">.</span><span class="n">auto_refresh_panels</span><span class="p">:</span>
                <span class="n">topo</span><span class="o">.</span><span class="n">guimain</span><span class="o">.</span><span class="n">auto_refresh_panels</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


</div>
    <span class="k">def</span> <span class="nf">_connection_fields_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Open a Connection Fields plot for the unit currently</span>
<span class="sd">        identified by a right click.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s">&#39;plot&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_click_info</span><span class="p">:</span>
            <span class="n">sheet</span> <span class="o">=</span> <span class="n">topo</span><span class="o">.</span><span class="n">sim</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">_right_click_info</span><span class="p">[</span><span class="s">&#39;plot&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot_src_name</span><span class="p">]</span>
            <span class="c"># CEBERRORALERT: should avoid requesting cf out of range.</span>
            <span class="n">center_x</span><span class="p">,</span><span class="n">center_y</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_click_info</span><span class="p">[</span><span class="s">&#39;coords&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">topo</span><span class="o">.</span><span class="n">guimain</span><span class="p">[</span><span class="s">&#39;Plots&#39;</span><span class="p">][</span><span class="s">&quot;Connection Fields&quot;</span><span class="p">](</span><span class="n">x</span><span class="o">=</span><span class="n">center_x</span><span class="p">,</span><span class="n">y</span><span class="o">=</span><span class="n">center_y</span><span class="p">,</span><span class="n">sheet</span><span class="o">=</span><span class="n">sheet</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">_receptive_field_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Open a Receptive Field plot for the unit currently</span>
<span class="sd">        identified by a right click.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s">&#39;plot&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_click_info</span><span class="p">:</span>
            <span class="n">plot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_click_info</span><span class="p">[</span><span class="s">&#39;plot&#39;</span><span class="p">]</span>
            <span class="n">sheet</span> <span class="o">=</span> <span class="n">topo</span><span class="o">.</span><span class="n">sim</span><span class="p">[</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_src_name</span><span class="p">]</span>
            <span class="n">center_x</span><span class="p">,</span><span class="n">center_y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_right_click_info</span><span class="p">[</span><span class="s">&#39;coords&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">r</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_click_info</span><span class="p">[</span><span class="s">&#39;coords&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

            <span class="c"># RFHACK:</span>
            <span class="c"># just matrixplot for whatever generators have the views</span>
            <span class="k">for</span> <span class="n">g</span> <span class="ow">in</span> <span class="n">topo</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">objects</span><span class="p">(</span><span class="n">GeneratorSheet</span><span class="p">)</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">view</span> <span class="o">=</span> <span class="n">sheet</span><span class="o">.</span><span class="n">views</span><span class="o">.</span><span class="n">RFs</span><span class="p">[</span><span class="n">g</span><span class="o">.</span><span class="n">name</span><span class="p">][</span><span class="n">center_x</span><span class="p">,</span> <span class="n">center_y</span><span class="p">]</span>
                    <span class="n">matrixplot</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">last</span><span class="o">.</span><span class="n">data</span><span class="p">,</span><span class="n">title</span><span class="o">=</span><span class="p">(</span><span class="s">&quot;Receptive Field of </span><span class="si">%s</span><span class="s"> unit (</span><span class="si">%d</span><span class="s">,</span><span class="si">%d</span><span class="s">) at coord (</span><span class="si">%3.0f</span><span class="s">, </span><span class="si">%3.0f</span><span class="s">) at time </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span>
                                                    <span class="p">(</span><span class="n">sheet</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">r</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">center_x</span><span class="p">,</span><span class="n">center_y</span><span class="p">,</span><span class="n">topo</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">timestr</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">timestamp</span><span class="p">))))</span>
                <span class="k">except</span><span class="p">:</span>
                    <span class="c"># maybe lose this warning</span>
                    <span class="n">topo</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;No RF measurements are available yet for input_sheet </span><span class="si">%s</span><span class="s">; run the Receptive Field plot for that input_sheet to see the RF.&quot;</span><span class="o">%</span><span class="n">g</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>


    <span class="k">def</span> <span class="nf">_or_tuning_curve_window</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Open a Tuning Curve plot for the unit currently</span>
<span class="sd">        identified by a right click.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s">&#39;plot&#39;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_click_info</span><span class="p">:</span>
            <span class="n">plot</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_click_info</span><span class="p">[</span><span class="s">&#39;plot&#39;</span><span class="p">]</span>
            <span class="n">sheet</span> <span class="o">=</span> <span class="n">topo</span><span class="o">.</span><span class="n">sim</span><span class="p">[</span><span class="n">plot</span><span class="o">.</span><span class="n">plot_src_name</span><span class="p">]</span>
            <span class="n">center_x</span><span class="p">,</span><span class="n">center_y</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_right_click_info</span><span class="p">[</span><span class="s">&#39;coords&#39;</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">r</span><span class="p">,</span><span class="n">c</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_right_click_info</span><span class="p">[</span><span class="s">&#39;coords&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="kn">from</span> <span class="nn">topo.command.pylabplot</span> <span class="kn">import</span> <span class="n">cyclic_tuning_curve</span>
                <span class="n">cyclic_tuning_curve</span><span class="p">(</span><span class="n">x_axis</span><span class="o">=</span><span class="s">&quot;orientation&quot;</span><span class="p">,</span><span class="n">coords</span><span class="o">=</span><span class="p">[(</span><span class="n">center_x</span><span class="p">,</span><span class="n">center_y</span><span class="p">)],</span><span class="n">sheet</span><span class="o">=</span><span class="n">sheet</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
                <span class="n">topo</span><span class="o">.</span><span class="n">sim</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s">&quot;No orientation tuning curve measurements are available yet for sheet </span><span class="si">%s</span><span class="s">; run the Orientation Tuning (Fullfield) command and try again.&quot;</span><span class="o">%</span><span class="n">sheet</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>


<div class="viewcode-block" id="SheetPanel.conditional_refresh"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.SheetPanel.conditional_refresh">[docs]</a>    <span class="k">def</span> <span class="nf">conditional_refresh</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Only calls refresh() if auto_refresh is enabled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">auto_refresh</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">refresh</span><span class="p">()</span>
</div>
<div class="viewcode-block" id="SheetPanel.conditional_redraw"><a class="viewcode-back" href="../../../Reference_Manual/topo.tkgui.html#topo.tkgui.plotgrouppanel.SheetPanel.conditional_redraw">[docs]</a>    <span class="k">def</span> <span class="nf">conditional_redraw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Only calls redraw_plots() if auto_refresh is enabled.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">auto_refresh</span><span class="p">:</span><span class="bp">self</span><span class="o">.</span><span class="n">redraw_plots</span><span class="p">()</span></div></div>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../../index.html">
              <img class="logo" src="../../../_static/topo-banner7.png" alt="Logo"/>
            </a></p>
<ul class="global-toc">

<li><a href="../../../index.html">Home</a></li>
<li><a href="../../../News/index.html">News</a></li>
<li><a href="../../../Downloads/index.html">Downloads</a></li>
<li><a href="../../../Tutorials/index.html">Tutorials</a></li>
<li><a href="../../../User_Manual/index.html">User Manual</a></li>
<li><a href="../../../Reference_Manual/index.html">Reference Manual</a></li>
<li><a href="../../../Developer_Manual/index.html">Developer Manual</a></li>
<li><a href="http://github.com/ioam/topographica">Github Source Code</a></li>
<li><a href="../../../Forums/index.html">Forums</a></li>
<li><a href="../../../Team_Members/index.html">Team Members</a></li>
<li><a href="../../../Future_Work/index.html">Future Work</a></li>
<li><a href="../../../FAQ/index.html">FAQ</a></li>
<li><a href="../../../Links/index.html">Links</a></li>
<li><a href="../../../Home/pubs.html">Publications</a></li>
<li><a href="../../../site_map.html">Site Map</a></li>
</ul>
<h3><a href="../../../index.html">Table Of Contents</a></h3>



<h3>This Page</h3>
<ul class="this-page-menu">
	<li><a	href="https://github.com/ioam/topographica/edit/master/doc/_modules/topo/tkgui/plotgrouppanel.rst" rel="nofollow">Edit on GitHub</a></li>
    <li><a	href="http://doozy.inf.ed.ac.uk:8010/builders/topographica_docs" rel="nofollow">Rebuild docs</a></li>
</ul>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>

<li><a href="../../../index.html">Home</a></li>
<li><a href="../../../Downloads/index.html">Downloads</a></li>
<li><a href="../../../Tutorials/index.html">Tutorials</a></li>
<li><a href="../../../User_Manual/index.html">User Manual</a></li>



<li><ul class="parents">



          <li><a href="../../index.html" >Module code</a> &raquo;</li>
          <li><a href="../tkgui.html" >topo.tkgui</a> &raquo;</li>

</ul></li>


      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2013, IOAM.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.2.
    </div>
  </body>
</html>